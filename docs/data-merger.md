# Data Merger

`data-merger.js` is a utility that merges additional properties into an existing tree-like data structure. It's designed to enrich the tree nodes generated by the mappers with extra metadata based on Fully Qualified Names (FQNs).

## Function: `mergeData(treeData, additionalData)`

Merges `additionalData` into `treeData` by matching `fqn` properties of the tree nodes.

### Parameters

-   `treeData` (Array<Object>): The base tree data structure, typically generated by one of the mapper utilities. Each node in this array (and its children) is expected to have an `fqn` property.
-   `additionalData` (Object): An object where keys are FQNs (strings) and values are objects containing properties to be merged into the corresponding tree node. For example: `{ "user_id": { "Source": "DB", "PII": "Yes" } }`.

### Returns

-   `Array<Object>`: A new tree data structure with the `additionalData` merged into the matching nodes. The original `treeData` is not modified.

## How it Works

The `mergeData` function recursively traverses the `treeData`. For each node, it checks if its `fqn` matches any key in the `additionalData` object. If a match is found, the properties from `additionalData[fqn]` are shallow-merged into the corresponding tree node. This allows for flexible extension of the tree nodes with external metadata.

## Example

Given `treeData`:

```json
[
  {
    "id": "node-0",
    "name": "user_id",
    "dataType": "long",
    "dataTypeDisplay": "long",
    "Nullable": "No",
    "Description": "Unique user ID",
    "fqn": "user_id"
  },
  {
    "id": "node-1",
    "name": "address",
    "dataType": "record",
    "dataTypeDisplay": "record",
    "Nullable": "No",
    "Description": "User address",
    "fqn": "address",
    "children": [
      {
        "id": "node-2",
        "name": "street",
        "dataType": "string",
        "dataTypeDisplay": "string",
        "Nullable": "No",
        "Description": "Street name",
        "fqn": "address.street"
      }
    ]
  }
]
```

And `additionalData`:

```json
{
  "user_id": {
    "Source": "DB",
    "PII": "Yes"
  },
  "address.street": {
    "Source": "API"
  }
}
```

`mergeData` would produce:

```json
[
  {
    "id": "node-0",
    "name": "user_id",
    "dataType": "long",
    "dataTypeDisplay": "long",
    "Nullable": "No",
    "Description": "Unique user ID",
    "Source": "DB",
    "PII": "Yes",
    "fqn": "user_id"
  },
  {
    "id": "node-1",
    "name": "address",
    "dataType": "record",
    "dataTypeDisplay": "record",
    "Nullable": "No",
    "Description": "User address",
    "fqn": "address",
    "children": [
      {
        "id": "node-2",
        "name": "street",
        "dataType": "string",
        "dataTypeDisplay": "string",
        "Nullable": "No",
        "Description": "Street name",
        "Source": "API",
        "fqn": "address.street"
      }
    ]
  }
]
```
